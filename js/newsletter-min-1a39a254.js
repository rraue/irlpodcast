!function(e){"use strict";var t=document.getElementById("newsletter_form");if(t){var n=function(e,t){for(;!e.classList.contains(t);)if(void 0===typeof(e=e.parentNode))return null;return e}(t,"newsletter");if(n.classList.contains("js-collapse")){var r=document.getElementById("email");r.addEventListener("focus",function e(){n.classList.remove("js-collapse"),r.removeEventListener("focus",e,!1)},!1)}var s=[],o=document.getElementById("newsletter_errors");t.addEventListener("submit",function(r){if(t.getAttribute("data-skip-xhr"))return!0;for(r.preventDefault(),r.stopPropagation(),s=[],o.style.display="none";o.firstChild;)o.removeChild(o.firstChild);var l=document.getElementById("fmt").value,a=document.getElementById("email").value,u=document.querySelector('input[name="newsletters"]:checked')?document.querySelector('input[name="newsletters"]:checked').value:"",d=document.querySelector('input[name="privacy"]:checked')?"&privacy=true":"",c="email="+encodeURIComponent(a)+"&newsletters="+u+d+"&fmt="+l,p=new XMLHttpRequest;p.onload=function(r){if(r.target.status>=200&&r.target.status<300){if(null===o)return void i(new Error);var o=r.target.response;if(!0===o.success)t.style.display="none",function(){var e=document.getElementById("newsletter_thanks");if(n.classList.contains("newsletter-inline")){var r=window.vs.utils.parentByClass(t,"section_body");r.insertBefore(e,r.firstChild);for(var s=r.children,o=0;o<s.length;o++)s[o].style.display="none"}e.style.display="block"}(),e.push({event:"newsletter-signup-success",newsletter:u});else{if(o.errors)for(var l=0;l<o.errors.length;l++)s.push(o.errors[l]);i(new Error)}}else i(new Error)},p.onerror=function(e){i()};var m=t.getAttribute("action");return p.open("POST",m,!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.timeout=5e3,p.ontimeout=i,p.responseType="json",p.send(c),!1},!1)}function i(){var e=document.createElement("ul");if(s.length)for(var n=0;n<s.length;n++){var r=document.createElement("li");r.appendChild(document.createTextNode(s[n])),e.appendChild(r)}else t.setAttribute("data-skip-xhr",!0),t.submit();o.appendChild(e),o.style.display="block"}}(window.dataLayer||[]);